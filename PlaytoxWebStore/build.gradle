apply plugin: 'java'
apply plugin: 'war'

compileJava.options.encoding = 'UTF-8'

repositories {
    mavenCentral()
}

dependencies {
    compile 'org.hibernate:hibernate-core:3.6.0.Final'
    compile 'mysql:mysql-connector-java:5.1.27'
    compile 'org.springframework:spring:2.5.5'
    compile 'javassist:javassist:3.12.1.GA'
    compile 'javax.servlet:jstl:1.2'
    compile 'com.google.guava:guava:15.0'
    compile fileTree(dir: "$catalinaHome\\lib", include: '*.jar')
}

task copyToLib(type: Copy) {
    into "lib"
    exclude { details ->
        file("$catalinaHome\\lib").listFiles().find({it.name == details.file.name})
    }
    from configurations.compile
}

sourceSets {
    main {
        java {
            srcDir 'src'
        }
        resources {
            srcDir 'web'
        }
    }
}

task printVar << {
    print "$catalinaHome"
    print '$catalinaHome'
}
